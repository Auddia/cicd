name: 'API Update'
description: 'Updates the openapi file and GCP endpoints deployment'
inputs:
  gcp_project:
    description: 'GCP project to deploy/update the endpoint configuration.'
    required: true
  api_subdomain:
    description: 'The subdomain of the api being updated'
    required: true
  openapi_dir:
    description: The directory location of all the openapi templates and configurations
    default: "./"
  template:
    description: 'The name of the template yaml file'
    default: 'template.yaml'
  outfile:
    description: 'The name of the outputted Open API file.'
    default: 'openapi.yaml' 
  environment_key:
    description: 'Key in the template to replace with the environment value.'
    default: '<environment>'
  environment_value:
    description: 'Value ithat will replace the environment key in the template.'
    default: 'production'
runs:
  using: 'docker'
  image: "Dockerfile"
  env: 
    GCP_PROJECT: ${{ inputs.gcp_project }}
    API_SUBDOMAIN: ${{ inputs.api_subdomain }}
    OPENAPI_DATA_DIR: ${{ inputs.openapi_dir }}
    TEMPLATE: ${{ inputs.template }}
    OUTFILE: ${{ inputs.outfile }}
    ENV_KEY: ${{ inputs.environment_key }}
    ENV_VALUE: ${{ inputs.environment_value }}
  # args:
  #   - ${{ inputs.gcp_project }}
  #   - ${{ inputs.api_subdomain }}
  #   - ${{ inputs.openapi_dir }}
  #   - ${{ inputs.template }}
  #   - ${{ inputs.outfile }}
  #   - ${{ inputs.environment_key }}
  #   - ${{ inputs.environment_value }}
